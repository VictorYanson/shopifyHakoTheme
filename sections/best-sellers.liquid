<div class="flex flex-col items-center w-full gap-y-[40px]">
  <h1>OUR BEST-SELLERS</h1>
  
  {% assign featured = collections['frontpage'] %}
  <div class="bestseller">
    {% for product in featured.products limit: 4 %}
      <div class="bestseller-product">
        <div class="image-container relative">
          {% if product.featured_image %}
          {% render 'image',
              class: 'bestseller-product__image',
              image: product.featured_image,
              url: product.url,
              crop: 'center'
          %}
          {% endif %}
          <form method="post" action={{ routes.cart_add_url }}>
            <input type="hidden" name="id" value="{{ product.variants.first.id }}">
            <button type="submit" class="add-to-cart">
              <img 
                src="{{ 'icon-cart.svg' | asset_url }}" 
                alt="cart icon"
                height="22"
                width="22"
              />
              <p class="hover-text">
                Add to cart
              </p>
            </button>
          </form>
        </div>
        <div class="bestseller-product__content flex flex-col items-center gap-[6px] py-[10px]">
          <p class="text-[22px]">{{ product.title | escape | link_to: product.url }}</p>
          <p class="text-[22px]"><strong>{{ product.price | money_without_trailing_zeros }}</strong></p>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% stylesheet %}
  .add-to-cart {
    background: rgb(255, 255, 255);
    padding: 10px 9px 10px 10px;
    border-radius: 1000px;
    gap: 2px;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    border: none;
    box-shadow: rgba(99, 99, 99, 0.11) 0px 2px 7px 6px;
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 10;
    overflow: hidden;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .image-container:hover .add-to-cart {
    opacity: 1;
  }

  .add-to-cart:hover {
    padding: 10px 12px 10px 10px;
  }

  .add-to-cart .hover-text {
    max-width: 0;
    overflow: hidden;
    white-space: nowrap;
    transition: max-width 0.3s ease, margin-left 0.3s ease;
    margin-left: 0;
  }

  .add-to-cart:hover .hover-text {
    max-width: 100px;
    margin-left: 8px;
  }

  .bestseller {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    gap: 1.3rem;
  }

  .image-container {
    transition: transform 0.3s ease;
  }

  .image-container:hover {
    transform: scale(1.01);
  }

  .bestseller-product__image img {
    width: 100% !important;
    height: auto;
    aspect-ratio: 3/4;
    object-fit: cover;
    border-radius: var(--global-border-radius);
  }
  
  .bestseller-product {
    width: 100%;
    height: 400px;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "best-sellers",
  "settings": []
}
{% endschema %}